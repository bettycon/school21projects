#!/bin/bash

# Функции для проверки входных параметров

validate_input() {
    local folder_chars=$1
    local file_chars=$2
    local file_size=$3
    
    # Проверяем количество параметров
    if [ $# -ne 3 ]; then
        echo "Ошибка: Требуется ровно 3 параметра."
        return 1
    fi
    
    # Проверяем символы для папок (параметр 1)
    if ! [[ "$folder_chars" =~ ^[a-zA-Z]{1,7}$ ]]; then
        echo "Ошибка: Параметр 1 должен содержать 1-7 букв английского алфавита."
        return 1
    fi
    
    # Проверяем символы для файлов (параметр 2)
    if ! [[ "$file_chars" =~ ^[a-zA-Z]{1,7}\.[a-zA-Z]{1,3}$ ]]; then
        echo "Ошибка: Параметр 2 должен быть в формате 'имя.расширение' (1-7 букв.имя, 1-3 букв.расширение)."
        return 1
    fi
    
    # Проверяем размер файла (параметр 3)
    if ! [[ "$file_size" =~ ^[0-9]+Mb$ ]]; then
        echo "Ошибка: Параметр 3 должен быть в формате 'N Mb', где N - число."
        return 1
    fi
    
    size=${file_size%Mb}
    if [ "$size" -gt 100 ]; then
        echo "Ошибка: Размер файла не должен превышать 100Mb."
        return 1
    fi
    
    return 0
}
